define(["durandal/app","durandal/system","knockout","data"],function(e,t,n,i){var r,o,a,s,l,u=n.utils.arrayFirst(i,function(e){return"ngocdung"===e.id}),c={profile:n.observable(u),activePeriodId:n.observable(0),activeDetailId:n.observable(0),changePeriod:function(e){var t=$("#timeline-id-"+e.id);c.activePeriodId(e.id),c.activeDetailId(e.id),r&&clearTimeout(r),s.data("auto-scroll",!0),s.scrollTo(t,{offsetTop:220},function(){r=setTimeout(function(){o.data("auto-scroll",!1)},1e3)})},attached:function(){o||(l=$(".navbar.navbar-default"),o=$("#timeline-wrapper"),s=$("#history-page-host"),a=$("#period-panel")),s.css("top",l.height()+a.outerHeight()),$(window).resize(function(){s.css("top",l.outerHeight()+a.outerHeight())}),o.scroll(function(){if(!o.data("auto-scroll")){var e=0,t=o.scrollTop(),i=[];0!==t&&$("ul li.timeline-content",s).each(function(){var t=$(this).visible("partial"),r=n.contextFor(this);t&&(e=r.$parent.id,i.push(e))}),i=n.utils.arrayGetDistinctValues(i),i.length>0&&c.activePeriodId(e)}})}};return c});