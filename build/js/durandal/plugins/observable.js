define(["durandal/system","durandal/binder","knockout"],function(e,t,n){function i(e){var t=e[0];return"_"===t||"$"===t||T&&e===T}function r(t){return!(!t||void 0===t.nodeType||!e.isNumber(t.nodeType))}function o(e){if(!e||r(e)||e.ko===n||e.jquery)return!1;var t=h.call(e);return-1==g.indexOf(t)&&!(e===!0||e===!1)}function a(e){var t={};return Object.defineProperty(e,"__observable__",{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function s(e,t,n){var i=e.__observable__,r=!0;if(!i||!i.__full__){i=i||a(e),i.__full__=!0,b.forEach(function(n){t[n]=function(){return w[n].apply(e,arguments)}}),v.forEach(function(n){e[n]=function(){r=!1;var e=x[n].apply(t,arguments);return r=!0,e}}),m.forEach(function(n){e[n]=function(){r&&t.valueWillMutate();var i=w[n].apply(e,arguments);return r&&t.valueHasMutated(),i}}),y.forEach(function(i){e[i]=function(){for(var o=0,a=arguments.length;a>o;o++)l(arguments[o],n);r&&t.valueWillMutate();var s=w[i].apply(e,arguments);return r&&t.valueHasMutated(),s}}),e.splice=function(){for(var i=2,o=arguments.length;o>i;i++)l(arguments[i],n);r&&t.valueWillMutate();var a=w.splice.apply(e,arguments);return r&&t.valueHasMutated(),a};for(var o=0,s=e.length;s>o;o++)l(e[o],n)}}function l(t,i){var r,l;if(T&&t&&t[T]&&(i=i?i.slice(0):[],i.push(t[T])),o(t)&&(r=t.__observable__,!r||!r.__full__)){if(r=r||a(t),r.__full__=!0,e.isArray(t)){var u=n.observableArray(t);s(t,u,i)}else for(var f in t)if(!p(f)&&!r[f]){var h=Object.getPropertyDescriptor(t,f);h&&(h.get||h.set)?d(t,f,{get:h.get,set:h.set}):(l=t[f],e.isFunction(l)||c(t,f,l,i))}k&&e.log("Converted",t)}}function u(e,t,n){n?t?t.destroyAll||s(t,e):(t=[],s(t,e)):l(t),e(t)}function c(t,i,r,o){var c,d,f=t.__observable__||a(t);if(void 0===r&&(r=t[i]),e.isArray(r))c=n.observableArray(r),s(r,c,o),d=!0;else if("function"==typeof r){if(!n.isObservable(r))return null;c=r}else!D&&e.isPromise(r)?(c=n.observable(),r.then(function(t){if(e.isArray(t)){var i=n.observableArray(t);s(t,i,o),t=i}c(t)})):(c=n.observable(r),l(r,o));return o&&o.length>0&&o.forEach(function(n){e.isArray(r)?c.subscribe(function(e){n(t,i,null,e)},null,"arrayChange"):c.subscribe(function(e){n(t,i,e,null)})}),Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:c,set:n.isWriteableObservable(c)?function(t){t&&e.isPromise(t)&&!D?t.then(function(t){u(c,t,e.isArray(t))}):u(c,t,d)}:void 0}),f[i]=c,c}function d(t,i,r){var o,a={owner:t,deferEvaluation:!0};return"function"==typeof r?a.read=r:("value"in r&&e.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof r.get&&"function"!=typeof r.read&&e.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),a.read=r.get||r.read,a.write=r.set||r.write),o=n.computed(a),t[i]=o,c(t,i,o)}var f,p,h=Object.prototype.toString,g=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],v=["remove","removeAll","destroy","destroyAll","replace"],m=["pop","reverse","sort","shift","slice"],y=["push","unshift"],b=["filter","map","reduce","reduceRight","forEach","every","some"],w=Array.prototype,x=n.observableArray.fn,k=!1,T=void 0,D=!1;if(!("getPropertyDescriptor"in Object)){var C=Object.getOwnPropertyDescriptor,S=Object.getPrototypeOf;Object.getPropertyDescriptor=function(e,t){for(var n,i=e;i&&!(n=C(i,t));)i=S(i);return n}}return f=function(e,t){var i,r,o;return e?(i=e.__observable__,i&&(r=i[t])?r:(o=e[t],n.isObservable(o)?o:c(e,t,o))):null},f.defineProperty=d,f.convertProperty=c,f.convertObject=l,f.install=function(e){var n=t.binding;t.binding=function(e,t,i){i.applyBindings&&!i.skipConversion&&l(e),n(e,t)},k=e.logConversion,e.changeDetection&&(T=e.changeDetection),D=e.skipPromises,p=e.shouldIgnorePropertyName||i},f});